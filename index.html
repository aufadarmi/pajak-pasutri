<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kalkulator Pajak Suami Istri</title>
  <link rel="stylesheet" href="css/style.css">

  <!-- Fade-in animation (AMAN, non-breaking) -->
  <style>
    .fade-in {
      animation: fadeInUp 0.4s ease-out both;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<div class="container">
  <h1>Kalkulator Pajak Penghasilan Pasutri Karyawan ğŸ¢</h1>

  <!-- ================= INPUT ================= -->
  <div class="grid">
    <div>
      <label>ğŸ¤µğŸ» Penghasilan Neto Suami (Setahun)</label>
      <input id="incomeHusband" type="text"
             placeholder="Contoh: 110.000.000"
             oninput="formatInputRupiah(this)">
    </div>

    <div>
      <label>ğŸ‘°ğŸ» Penghasilan Neto Istri (Setahun)</label>
      <input id="incomeWife" type="text"
             placeholder="Contoh: 165.000.000"
             oninput="formatInputRupiah(this)">
    </div>

    <div>
      <label>Status PTKP Suami</label>
      <select id="ptkpHusband">
        <option value="58500000">K/0 (58.500.000)</option>
        <option value="63000000">K/1 (63.000.000)</option>
        <option value="67500000">K/2 (67.500.000)</option>
        <option value="72000000">K/3 (72.000.000)</option>
      </select>
    </div>

    <div>
      <label>Status PTKP Istri</label>
      <div class="fixed-select">TK/0 (54.000.000)</div>
      <input type="hidden" id="ptkpWife" value="54000000">
      <small class="note">â„¹ï¸ PTKP istri menikah selalu TK/0</small>
    </div>
  </div>

  <!-- ================= ACTION ================= -->
  <div class="actions">
    <button onclick="calculate()">Hitung Pajak</button>
  </div>

  <!-- ================= BASELINE RESULT ================= -->
  <div id="output" class="result fade-in" style="display:none"></div>

  <!-- ================= AWARENESS CARD ================= -->
  <div id="awareness-card" class="info-card hidden fade-in">
    <p>
      Dalam praktiknya, penghitungan pajak suami dan istri secara terpisah
      <strong>dapat menimbulkan perbedaan angka</strong> saat pelaporan tahunan.
      <br><br>
      Walaupun pajak dihitung secara terpisah, pada tahap pelaporan tahunan
      penghasilan suami dan istri dipandang sebagai
      <strong class="modern-note"
              data-tooltip="Sesuai UU PPh No. 36 Tahun 2008">
        satu kesatuan keluarga
      </strong>.
    </p>
    <button id="btn-show-phmt" class="link-btn">
      Lihat kemungkinan dampaknya â†’
    </button>
  </div>

  <!-- ================= PH/MT SIMULATION ================= -->
  <div id="phmt-wrapper">
    <table></table>
  </div>


  <!-- ================= EXPLANATION TRIGGER ================= -->
  <button id="btn-show-explanation"
          class="link-btn hidden fade-in"
          style="margin:15px auto; display:block;">
    Kenapa selisih pajak bisa terjadi?
  </button>

  <!-- ================= EXPLANATION ================= -->
  <div id="explanation-panel" class="info-card hidden fade-in">
    <strong>Kenapa selisih pajak bisa terjadi?</strong>
    <p>
      Walaupun pajak dihitung secara terpisah, pada tahap pelaporan tahunan
      penghasilan suami dan istri dipandang sebagai
      <strong class="modern-note"
              data-tooltip="Sesuai UU PPh No. 36 Tahun 2008">
        satu kesatuan keluarga
      </strong>.
      <br><br>
      Dalam kondisi tertentu, pendekatan ini dapat menyebabkan total pajak
      berbeda dibanding perhitungan terpisah sehari-hari.
    </p>
  </div>

  <!-- ================= TAX PLANNING CTA ================= -->
  <div id="tax-planning-cta" class="info-card hidden fade-in">
    Ingin meminimalkan potensi selisih pajak?
    <p>
      <strong>Penggabungan NPWP suami dan istri</strong> dapat menjadi
      strategi tax planning yang efisien dan membantu menghindari
      kurang bayar di akhir tahun.
    </p>
    <button class="secondary-btn"
      onclick="window.open('https://www.instagram.com/reels/DSHwsmsEpQ3/', '_blank')">
      Pelajari lebih lanjut tentang penggabungan NPWP
    </button>
  </div>
</div>

<!-- ================= FOOTER ================= -->
<footer class="site-footer">
  <strong>Pajak Pasutri</strong> â€” 2025
</footer>

<!-- ================= SIDEBAR ================= -->
<div id="sidebar" class="sidebar">
  <div class="sidebar-header">
    <h3 id="sidebarTitle">Detail Perhitungan</h3>
    <button onclick="closeSidebar()">âœ•</button>
  </div>
  <div id="sidebarContent" class="sidebar-content"></div>
</div>
<div id="sidebarOverlay" class="sidebar-overlay" onclick="closeSidebar()"></div>

<!-- ================= MODAL APRESIASI ================= -->
<div id="appreciationModal" class="appr-modal">
  <div class="appr-box">
    <h2>ğŸ‡®ğŸ‡© Terima kasih</h2>
    <p>Total kontribusi pajak keluarga kamu</p>
    <div class="appr-amount">
      <strong id="apprTotalTax">Rp 0</strong>
    </div>
    <div class="appr-funfact">
      <div class="appr-icon">ğŸ±</div>
      <div>
        <strong id="funfactTitle"></strong>
        <p id="funfactDesc"></p>
      </div>
    </div>
    <button onclick="closeAppreciation()">Lihat Hasil</button>
  </div>
</div>

<script src="js/script.js"></script>
</body>
</html>
